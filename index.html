<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Ordering</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent; /* Prevents flash on mobile tap */
        }
        .category-btn.active {
            background-color: #FB923C; /* Orange-400 */
            color: white;
            font-weight: 600;
        }
        /* For smooth scrolling to categories */
        html {
            scroll-behavior: smooth;
        }
        /* Custom scrollbar for category bar */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header Banner -->
    <header class="relative bg-gray-800">
        <img src="https://placehold.co/600x300/FBBF24/333?text=Your+Banner" 
             alt="Store Banner" 
             class="w-full h-48 object-cover"
             onerror="this.onerror=null;this.src='https://placehold.co/600x300/CCCCCC/FFFFFF?text=Banner+Image';">
        <div class="absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center text-white p-4">
            <h1 id="store-name-banner" class="text-3xl font-bold">Your Store Name</h1>
            <p id="store-tagline-banner" class="text-lg mt-1">Scan, Select, and Order in Seconds</p>
        </div>
    </header>

    <!-- Sticky Category Filter Bar -->
    <div id="category-bar-container" class="sticky top-0 bg-white shadow-md z-20 py-2">
        <div id="category-filters" class="flex justify-center items-center space-x-2 px-4 overflow-x-auto no-scrollbar">
            <!-- Category buttons will be dynamically inserted here -->
        </div>
    </div>

    <!-- Main Content -->
    <main class="p-4 max-w-3xl mx-auto pb-24">
        <!-- Product Grid -->
        <div id="product-grid" class="grid grid-cols-1 gap-4">
            <!-- Products will be dynamically inserted here -->
        </div>
    </main>

    <!-- Floating Cart / Bottom Bar -->
    <div id="cart-container" class="fixed bottom-4 right-4 z-30 transition-all duration-300">
        <!-- Floating button -->
        <button id="cart-button" class="bg-orange-500 text-white w-16 h-16 rounded-full shadow-lg flex items-center justify-center transform hover:scale-110 transition-transform">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
            <span id="cart-count" class="absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center">0</span>
        </button>
        
        <!-- Bottom bar -->
        <div id="cart-bar" class="hidden fixed bottom-0 left-0 right-0 bg-orange-500 text-white p-3 shadow-lg flex justify-between items-center transform translate-y-full transition-transform duration-300">
             <div>
                <p id="cart-bar-items" class="font-bold">0 Items</p>
                <p id="cart-bar-total" class="text-sm">₹0.00</p>
             </div>
             <button id="view-cart-btn" class="bg-white text-orange-500 font-bold py-2 px-6 rounded-md">View Cart</button>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden flex items-end justify-center">
        <div id="cart-modal-content" class="bg-gray-50 w-full max-w-3xl rounded-t-2xl p-4 transform translate-y-full transition-transform duration-300 max-h-[85vh] flex flex-col">
            <div class="flex justify-between items-center border-b pb-3 mb-3">
                <h2 class="text-2xl font-bold text-gray-800">Your Order</h2>
                <button id="close-modal-btn" class="text-gray-500 hover:text-gray-800">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <!-- Customer Details -->
            <div class="bg-white p-4 rounded-lg shadow mb-4">
                 <h3 class="font-bold text-lg mb-2 text-gray-700">Your Details</h3>
                 <input type="text" id="customer-name" placeholder="Enter your name" class="w-full p-2 border rounded-md mb-2 focus:ring-2 focus:ring-orange-400 focus:border-transparent">
                 <textarea id="customer-address" placeholder="Enter your delivery address" rows="2" class="w-full p-2 border rounded-md mb-2 focus:ring-2 focus:ring-orange-400 focus:border-transparent"></textarea>
                 <button id="get-location-btn" class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition flex items-center justify-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    Use My Current Location
                 </button>
            </div>

            <!-- Cart Items -->
            <div id="cart-items-list" class="flex-grow overflow-y-auto space-y-3">
                <!-- Cart items will be dynamically inserted here -->
            </div>
            
            <!-- Empty Cart Message -->
             <div id="empty-cart-message" class="hidden text-center py-10">
                <svg class="w-16 h-16 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                <h3 class="mt-4 text-xl font-semibold text-gray-500">Your cart is empty</h3>
                <p class="text-gray-400">Add items from the menu to get started!</p>
            </div>

            <!-- Order Summary and Checkout -->
            <div class="mt-auto border-t pt-4">
                <div class="flex justify-between items-center text-lg font-bold text-gray-800">
                    <span>Total Amount</span>
                    <span id="cart-total">₹0.00</span>
                </div>
                <button id="place-order-btn" class="w-full bg-green-500 text-white text-lg font-bold py-3 px-4 rounded-lg mt-4 hover:bg-green-600 transition shadow-lg">
                    Place Order on WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- Custom Message Box -->
    <div id="message-box" class="hidden fixed top-5 left-1/2 -translate-x-1/2 bg-gray-800 text-white py-2 px-5 rounded-full shadow-lg z-50 transition-all duration-300 opacity-0 transform -translate-y-10">
        <p id="message-text"></p>
    </div>

<script>
    // --- CONFIGURATION ---
    const WHATSAPP_BUSINESS_NUMBER = '910000000000'; // IMPORTANT: Replace with your number (e.g., 91 for India)
    const STORE_NAME = 'Your Awesome Store';

    // --- MENU DATA ---
    const menuData = {
      "categories": [
        { "id": "beverages", "name": "Beverages" },
        { "id": "quick-bites", "name": "Quick Bites" },
        { "id": "sides", "name": "Sides" }
      ],
      "products": [
        // Beverages
        { "id": "prod_001", "category": "beverages", "name": "Irani Chai", "description": "Classic hyderabadi style chai.", "price": 20.00, "image": "https://placehold.co/300x300/8d5b4c/ffffff?text=Irani+Chai", "type": "veg" },
        { "id": "prod_002", "category": "beverages", "name": "Subza Lemon Tea", "description": "Refreshing lemon tea with basil seeds.", "price": 40.00, "image": "https://placehold.co/300x300/bef264/333333?text=Lemon+Tea", "type": "veg" },

        // Quick Bites
        { "id": "prod_003", "category": "quick-bites", "name": "BUN MUSKA (MASKAARI SPECIAL)", "description": "Soft bun with a generous layer of butter.", "price": 50.00, "image": "https://placehold.co/300x300/f59e0b/ffffff?text=Bun+Muska", "type": "veg" },
        { "id": "prod_004", "category": "quick-bites", "name": "SALTED FRIES", "description": "Classic crispy salted french fries.", "price": 90.00, "image": "https://placehold.co/300x300/facc15/333333?text=Fries", "type": "veg" },
        { "id": "prod_005", "category": "quick-bites", "name": "PERI-PERI FRIES", "description": "Crispy fries tossed in spicy peri-peri seasoning.", "price": 110.00, "image": "https://placehold.co/300x300/ef4444/ffffff?text=Peri-Peri", "type": "veg" },
        { "id": "prod_006", "category": "quick-bites", "name": "CHEESY FRIES", "description": "Fries loaded with melted cheese.", "price": 130.00, "image": "https://placehold.co/300x300/f97316/ffffff?text=Cheesy", "type": "veg" },
        { "id": "prod_007", "category": "quick-bites", "name": "LOADED FRIES", "description": "Fries with cheese, sauces, and toppings.", "price": 150.00, "image": "https://placehold.co/300x300/eab308/ffffff?text=Loaded", "type": "veg" },
        { "id": "prod_008", "category": "quick-bites", "name": "Malai Rusk", "description": "Crispy rusk topped with creamy malai.", "price": 60.00, "image": "https://placehold.co/300x300/fef3c7/333333?text=Malai+Rusk", "type": "veg" },
        
        // Sides
        { "id": "prod_009", "category": "sides", "name": "Crisp Fan", "description": "A light and crispy fan-shaped biscuit.", "price": 15.00, "image": "https://placehold.co/300x300/fed7aa/333333?text=Fan", "type": "veg" },
        { "id": "prod_010", "category": "sides", "name": "Rusk", "description": "Classic crunchy tea-time rusk.", "price": 10.00, "image": "https://placehold.co/300x300/fde68a/333333?text=Rusk", "type": "veg" },
        { "id": "prod_011", "category": "sides", "name": "Osmania Biscuit", "description": "Famous hyderabadi buttery biscuit.", "price": 10.00, "image": "https://placehold.co/300x300/fcd34d/333333?text=Osmania", "type": "veg" },
        { "id": "prod_012", "category": "sides", "name": "Fruit Biscuit", "description": "Sweet biscuit with candied fruit pieces.", "price": 15.00, "image": "https://placehold.co/300x300/f9a8d4/333333?text=Fruit+Biscuit", "type": "veg" }
      ]
    };
</script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- STATE MANAGEMENT ---
        let cart = {}; // { productId: quantity }
        let products = [];
        let categories = [];

        // --- DOM ELEMENT SELECTORS ---
        const categoryFilters = document.getElementById('category-filters');
        const productGrid = document.getElementById('product-grid');
        const cartButton = document.getElementById('cart-button');
        const cartCount = document.getElementById('cart-count');
        const cartBar = document.getElementById('cart-bar');
        const cartBarItems = document.getElementById('cart-bar-items');
        const cartBarTotal = document.getElementById('cart-bar-total');
        const viewCartBtn = document.getElementById('view-cart-btn');
        const cartModal = document.getElementById('cart-modal');
        const cartModalContent = document.getElementById('cart-modal-content');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const cartItemsList = document.getElementById('cart-items-list');
        const emptyCartMessage = document.getElementById('empty-cart-message');
        const cartTotal = document.getElementById('cart-total');
        const placeOrderBtn = document.getElementById('place-order-btn');
        const customerNameInput = document.getElementById('customer-name');
        const customerAddressInput = document.getElementById('customer-address');
        const getLocationBtn = document.getElementById('get-location-btn');
        const storeNameBanner = document.getElementById('store-name-banner');
        
        // --- INITIALIZATION ---
        function initializeStore() {
            products = menuData.products;
            categories = menuData.categories;
            storeNameBanner.textContent = STORE_NAME;

            renderCategories();
            renderProducts('all');
            loadCartFromStorage();
            loadCustomerDetails();
            updateCart();
        }

        // --- RENDERING FUNCTIONS ---
        function renderCategories() {
            categoryFilters.innerHTML = ''; // Clear existing
            
            // Add 'All' button
            const allBtn = document.createElement('button');
            allBtn.className = 'category-btn active text-sm whitespace-nowrap px-4 py-2 rounded-full transition-colors duration-200 bg-gray-100 text-gray-700';
            allBtn.textContent = 'All';
            allBtn.dataset.filter = 'all';
            categoryFilters.appendChild(allBtn);

            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'category-btn text-sm whitespace-nowrap px-4 py-2 rounded-full transition-colors duration-200 bg-gray-100 text-gray-700';
                button.textContent = category.name;
                button.dataset.filter = category.id;
                categoryFilters.appendChild(button);
            });
        }

        function renderProducts(filter = 'all') {
            productGrid.innerHTML = '';
            const filteredProducts = filter === 'all' 
                ? products 
                : products.filter(p => p.category === filter);

            filteredProducts.forEach(product => {
                const card = document.createElement('div');
                card.className = 'flex items-start bg-white rounded-lg shadow-md overflow-hidden transition-all duration-200';
                card.dataset.productId = product.id;
                
                let typeIcon = '';
                if (product.type === 'veg') {
                    typeIcon = `<div class="w-5 h-5 border border-green-600 flex items-center justify-center mr-2"><div class="w-3 h-3 bg-green-600 rounded-full"></div></div>`;
                } else if (product.type === 'non-veg') {
                    typeIcon = `<div class="w-5 h-5 border border-red-600 flex items-center justify-center mr-2"><div class="w-0 h-0 border-l-[6px] border-l-transparent border-t-[9px] border-t-red-600 border-r-[6px] border-r-transparent"></div></div>`;
                }

                card.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="w-32 h-32 object-cover flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/300x300/CCCCCC/FFFFFF?text=Image+Not+Found';">
                    <div class="p-3 flex flex-col flex-grow">
                        <div class="flex items-center">
                            ${typeIcon}
                            <h3 class="font-semibold text-gray-800">${product.name}</h3>
                        </div>
                        <p class="text-sm text-gray-500 mt-1 flex-grow">${product.description}</p>
                        <div class="flex justify-between items-center mt-2 pt-2">
                            <span class="text-lg font-semibold text-gray-800">₹${product.price.toFixed(2)}</span>
                            <div class="product-action"></div>
                        </div>
                    </div>
                `;
                productGrid.appendChild(card);
                updateProductCard(product.id);
            });
        }

        function updateProductCard(productId) {
            const card = productGrid.querySelector(`[data-product-id="${productId}"]`);
            if (!card) return;

            const actionContainer = card.querySelector('.product-action');
            const quantity = cart[productId] || 0;
            
            card.classList.toggle('ring-2', quantity > 0);
            card.classList.toggle('ring-orange-400', quantity > 0);

            if (quantity === 0) {
                actionContainer.innerHTML = `<button data-product-id="${productId}" class="add-btn text-orange-500 border border-orange-500 font-bold text-sm py-2 px-6 rounded-md hover:bg-orange-500 hover:text-white transition-all duration-200">ADD</button>`;
            } else {
                actionContainer.innerHTML = `
                    <div class="flex items-center justify-center border border-orange-500 rounded-md">
                        <button data-product-id="${productId}" class="quantity-change-btn text-orange-500 w-8 h-8 flex items-center justify-center font-bold text-lg">-</button>
                        <span class="font-bold text-orange-500 px-2">${quantity}</span>
                        <button data-product-id="${productId}" class="quantity-change-btn text-orange-500 w-8 h-8 flex items-center justify-center font-bold text-lg">+</button>
                    </div>
                `;
            }
        }
        
        // --- CART LOGIC ---
        function addToCart(productId) {
            cart[productId] = (cart[productId] || 0) + 1;
            updateCart();
            showMessage(`${getProductById(productId).name} added to cart`);
        }

        function changeQuantity(productId, amount) {
            if (cart[productId]) {
                cart[productId] += amount;
                if (cart[productId] <= 0) {
                    delete cart[productId];
                     showMessage(`${getProductById(productId).name} removed from cart`);
                }
                updateCart();
            }
        }

        function updateCart() {
            saveCartToStorage();
            const totalItems = Object.values(cart).reduce((sum, qty) => sum + qty, 0);
            const totalPrice = Object.entries(cart).reduce((sum, [id, qty]) => {
                const product = getProductById(id);
                return sum + (product ? product.price * qty : 0);
            }, 0);

            cartCount.textContent = totalItems;
            
            if (totalItems > 0) {
                cartButton.classList.add('hidden');
                cartBar.classList.remove('hidden');
                setTimeout(() => cartBar.classList.remove('translate-y-full'), 10);
                cartBarItems.textContent = `${totalItems} ${totalItems > 1 ? 'Items' : 'Item'}`;
                cartBarTotal.textContent = `₹${totalPrice.toFixed(2)}`;
            } else {
                cartButton.classList.remove('hidden');
                cartBar.classList.add('translate-y-full');
                setTimeout(() => cartBar.classList.add('hidden'), 300);
            }

            updateCartModal(totalPrice);
            
            products.forEach(p => updateProductCard(p.id));
        }

        function updateCartModal(totalPrice) {
            cartItemsList.innerHTML = '';
            const cartEntries = Object.entries(cart);

            if (cartEntries.length === 0) {
                emptyCartMessage.classList.remove('hidden');
            } else {
                emptyCartMessage.classList.add('hidden');
                cartEntries.forEach(([id, qty]) => {
                    const product = getProductById(id);
                    if (product) {
                        const itemElement = document.createElement('div');
                        itemElement.className = 'flex items-center justify-between bg-white p-3 rounded-lg shadow-sm';
                        
                        const typeIcon = product.type === 'veg' 
                        ? `<div class="w-4 h-4 border border-green-600 flex items-center justify-center mr-2 flex-shrink-0"><div class="w-2 h-2 bg-green-600 rounded-full"></div></div>`
                        : `<div class="w-4 h-4 border border-red-600 flex items-center justify-center mr-2 flex-shrink-0"><div class="w-0 h-0 border-l-[4px] border-l-transparent border-t-[6px] border-t-red-600 border-r-[4px] border-r-transparent"></div></div>`;

                        itemElement.innerHTML = `
                            <div class="flex items-center">
                                ${typeIcon}
                                <div class="flex-grow">
                                    <p class="font-semibold text-gray-800">${product.name}</p>
                                    <p class="text-sm text-gray-600">₹${product.price.toFixed(2)}</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <div class="flex items-center justify-center border border-gray-300 rounded-md">
                                    <button data-product-id="${id}" class="quantity-change-btn text-gray-700 w-8 h-8 flex items-center justify-center font-bold text-lg">-</button>
                                    <span class="font-bold text-gray-800 px-2">${qty}</span>
                                    <button data-product-id="${id}" class="quantity-change-btn text-gray-700 w-8 h-8 flex items-center justify-center font-bold text-lg">+</button>
                                </div>
                                <span class="font-bold text-gray-800 w-20 text-right">₹${(product.price * qty).toFixed(2)}</span>
                            </div>
                        `;
                        cartItemsList.appendChild(itemElement);
                    }
                });
            }
            cartTotal.textContent = `₹${totalPrice.toFixed(2)}`;
        }
        
        // --- MODAL & UI ---
        function openCartModal() {
            cartModal.classList.remove('hidden');
            setTimeout(() => cartModalContent.classList.remove('translate-y-full'), 10);
        }

        function closeCartModal() {
            cartModalContent.classList.add('translate-y-full');
            setTimeout(() => cartModal.classList.add('hidden'), 300);
        }

        function showMessage(text) {
            const messageBox = document.getElementById('message-box');
            const messageText = document.getElementById('message-text');
            
            messageText.textContent = text;
            messageBox.classList.remove('hidden');
            setTimeout(() => {
                messageBox.classList.remove('opacity-0', '-translate-y-10');
            }, 10);

            setTimeout(() => {
                messageBox.classList.add('opacity-0', '-translate-y-10');
                setTimeout(() => messageBox.classList.add('hidden'), 300);
            }, 2000);
        }

        // --- DATA & HELPERS ---
        function getProductById(id) {
            return products.find(p => p.id === id);
        }

        // --- LOCAL STORAGE ---
        function saveCartToStorage() {
            localStorage.setItem('orderingAppCart', JSON.stringify(cart));
        }

        function loadCartFromStorage() {
            const storedCart = localStorage.getItem('orderingAppCart');
            if (storedCart) {
                cart = JSON.parse(storedCart);
            }
        }
        
        function saveCustomerDetails() {
            const details = {
                name: customerNameInput.value,
                address: customerAddressInput.value
            };
            localStorage.setItem('orderingAppCustomerDetails', JSON.stringify(details));
        }

        function loadCustomerDetails() {
            const storedDetails = localStorage.getItem('orderingAppCustomerDetails');
            if (storedDetails) {
                const details = JSON.parse(storedDetails);
                customerNameInput.value = details.name || '';
                customerAddressInput.value = details.address || '';
            }
        }

        // --- EVENT HANDLERS ---
        categoryFilters.addEventListener('click', (e) => {
            if (e.target.classList.contains('category-btn')) {
                document.querySelector('.category-btn.active')?.classList.remove('active');
                e.target.classList.add('active');
                const filter = e.target.dataset.filter;
                renderProducts(filter);
            }
        });

        productGrid.addEventListener('click', (e) => {
            const target = e.target;
            let button = target.closest('.add-btn, .quantity-change-btn');
            if (button) {
                const productId = button.dataset.productId;
                if (button.classList.contains('add-btn')) {
                    addToCart(productId);
                } else if (button.classList.contains('quantity-change-btn')) {
                    const amount = button.textContent === '+' ? 1 : -1;
                    changeQuantity(productId, amount);
                }
            }
        });

        cartItemsList.addEventListener('click', (e) => {
             let button = e.target.closest('.quantity-change-btn');
             if (button) {
                const productId = button.dataset.productId;
                const amount = button.textContent === '+' ? 1 : -1;
                changeQuantity(productId, amount);
            }
        });
        
        [cartButton, viewCartBtn].forEach(btn => btn.addEventListener('click', openCartModal));
        closeModalBtn.addEventListener('click', closeCartModal);
        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) closeCartModal();
        });

        [customerNameInput, customerAddressInput].forEach(input => {
            input.addEventListener('input', saveCustomerDetails);
        });

        getLocationBtn.addEventListener('click', () => {
            if (navigator.geolocation) {
                showMessage("Fetching your location...");
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const { latitude, longitude } = position.coords;
                        customerAddressInput.value = `My current location: https://www.google.com/maps?q=${latitude},${longitude}`;
                        saveCustomerDetails();
                        showMessage("Location fetched successfully!");
                    },
                    (error) => {
                         showMessage("Could not get location. Please enter manually.");
                        console.error("Geolocation Error:", error);
                    }
                );
            } else {
                showMessage("Geolocation is not supported by your browser.");
            }
        });

        placeOrderBtn.addEventListener('click', () => {
            const name = customerNameInput.value.trim();
            const address = customerAddressInput.value.trim();

            if (Object.keys(cart).length === 0) {
                showMessage("Your cart is empty!");
                return;
            }
            if (!name) {
                showMessage("Please enter your name.");
                customerNameInput.focus();
                return;
            }
            if (!address) {
                showMessage("Please enter your address or use location.");
                customerAddressInput.focus();
                return;
            }
            
            let orderSummary = `Hello ${STORE_NAME}, I would like to place an order.\n\n*My Details:*\nName: ${name}\nAddress: ${address}\n\n*Order Summary:*\n`;
            let totalPrice = 0;
            
            Object.entries(cart).forEach(([id, qty]) => {
                const product = getProductById(id);
                if (product) {
                    orderSummary += `- ${product.name} (x${qty}) - ₹${(product.price * qty).toFixed(2)}\n`;
                    totalPrice += product.price * qty;
                }
            });
            
            orderSummary += `\n*Total Amount: ₹${totalPrice.toFixed(2)}*\n\nPlease confirm my order.`;
            
            const whatsappUrl = `https://wa.me/${WHATSAPP_BUSINESS_NUMBER}?text=${encodeURIComponent(orderSummary)}`;
            window.open(whatsappUrl, '_blank');
        });

        // --- START THE APP ---
        initializeStore();
    });
</script>

</body>
</html>
